/* stylelint-disable scss/at-extend-no-missing-placeholder */

@use './mixins';

@media only screen and (min-width: 320px) and (max-width: 1400px) {
  .article__aside {
    @include mixins.pattern-border;
    background: var(--mm-color-sidebar);
  }

  .article__footer {
    margin-bottom: var(--mm-spacing);
  }
}

@media only screen and (min-width: 320px) {
  .article__page {
    display: grid;
    grid-template-areas:
      'header header'
      'article article'
      'footer footer'
      'aside aside';
    grid-template-columns: 50% 50%;
    grid-template-rows: min-content min-content min-content;
    height: 100%;
    padding: var(--mm-spacing);
  }

  .article__title {
    font-size: 28px;
  }

  .article__aside {
    grid-area: aside;
    justify-self: center;
    margin: 0;
    max-width: 880px;
    padding: var(--mm-spacing);
    position: relative;
    width: 100%;

    .aside__header {
      border-bottom: 1px dashed var(--mm-color-border);
      color: var(--mm-color-display-text);
      display: inline-block;
      font-family: var(--mm-font-stack-display);
      font-size: 20px;
      font-weight: 500;
      margin: calc(var(--mm-spacing) / 2) 0;
      padding-bottom: calc(var(--mm-spacing) / 2);
      width: 100%;
    }

    a {
      --psuedo-padding: 8px;
      color: #555;
      display: inline-block;
      font-family: var(--mm-font-stack-display);
      font-size: 12px;
      font-weight: 500;
      margin: calc(var(--mm-spacing) / 2) 0 0;
      position: relative;
      text-decoration: none;
      width: calc(100% - var(--mm-spacing));
    }

    a:hover {
      color: var(--mm-color-display-text);
    }
  }
}

@media only screen and (min-width: 768px) {
  .article__page {
    padding: var(--mm-spacing);
  }

  .article__header {
    justify-self: center;
    padding: 0;

    .article__title {
      font-size: 42px;
    }
  }

  .article__aside {
    justify-self: center;
  }

  .article__content {
    justify-self: center;
  }

  .article__footer {
    justify-self: center;
  }
}

@media only screen and (min-width: 1200px) {
  .article__page {
    padding: var(--mm-spacing) 0;
  }

  .article__header {
    grid-area: header;
    max-width: 880px;
    padding: 0 var(--mm-spacing) 0;
    width: 100%;
  }

  .article__aside {
    grid-area: aside;
    max-width: 800px;
    width: 100%;
  }

  .article__content {
    grid-area: article;
    max-width: 880px;
    padding: 0 var(--mm-spacing);
    width: 100%;
  }
}

@media only screen and (min-width: 1400px) {
  .article__page {
    display: grid;
    grid-template-areas:
      'header aside'
      'article aside'
      'footer aside';
    grid-template-columns: calc(100vw - 640px) var(--mm-layout-toc-width);
    grid-template-rows: min-content auto min-content;
    justify-items: start;
  }

  .article__header {
    grid-area: header;
  }

  .article__aside {
    background-color: var(--mm-color-background);
    border-bottom: 0;
    grid-area: aside;
    height: auto;
    margin: 0;
    min-width: auto;
    padding: 0;
    width: 100%;
  }

  .aside__contents {
    max-height: calc(100vh - var(--page-header-height));
    overflow-y: scroll;
    padding: var(--mm-spacing) var(--mm-spacing) 120px 20px;
    position: sticky;
    top: calc(var(--page-header-height));
    width: 100%;

    .aside__header {
      border-bottom: 1px dashed var(--mm-color-border);
      color: var(--mm-color-display-text);
      display: inline-block;
      font-family: var(--mm-font-stack-display);
      font-size: 20px;
      font-weight: 500;
      margin: calc(var(--mm-spacing) / 2) 0;
      padding-bottom: calc(var(--mm-spacing) / 2);
      width: 100%;
    }
  }

  .aside__articles {
    ul {
      font-family: var(--mm-font-stack-display);
      margin: calc(var(--mm-spacing) / 2) 0 0;

      li {
        font-size: 12px;
        margin-bottom: calc(var(--mm-spacing) / 2);

        a {
          --psuedo-padding: 8px;
          color: #555;
          display: inline-block;
          font-weight: 500;
          margin-top: 0;
          position: relative;
          text-decoration: none;
          width: calc(100% - var(--mm-spacing));
        }

        a:hover {
          color: var(--mm-color-display-text);
        }
      }
    }

    .article__aside-see-more {
      font-family: var(--mm-font-stack-display);
      margin-top: 0;
    }

    .current-article {
      border-left: 4px solid var(--mm-color-active-blue);
      color: var(--mm-color-display-text);
      margin-left: -12px;
      padding-left: 8px;
    }
  }
}

body {
  background: var(--mm-color-background);
}

.article__header {
  grid-area: header;
  margin: 0;
  max-width: 880px;
  width: 100%;
  z-index: 5;

  .article__title {
    color: #00374c;
    font-family: var(--mm-font-stack-display);
    font-weight: 600;
    grid-area: title;
    line-height: 1.2em;
    margin: 0;
    padding: 0 0 var(--mm-spacing);
    position: relative;
    scroll-margin-top: calc(var(--page-header-height) + var(--mm-spacing));
  }
}

.article__body {
  margin-bottom: var(--mm-spacing);
  margin-top: 0;
  // overflow-x: scroll;

  h2,
  h3,
  h4,
  .article__attachments-header {
    color: #00374c;
    font-family: var(--mm-font-stack-display);
    line-height: 1.2em;
    margin: calc(var(--mm-spacing) * 2) 0 calc(var(--mm-spacing) / 4);
    position: relative;
    scroll-margin-top: calc(var(--page-header-height) + var(--mm-spacing));
  }

  h2 {
    font-size: 24px;
    font-weight: 700;
  }

  h3,
  .article__attachments-header {
    font-size: 20px;
    font-weight: 500;
  }

  h4 {
    font-size: 18px;
    font-weight: 500;
  }


  p,
  p > span {
    color: var(--mm-color-primary-text);
    font-size: 16px;
    line-height: 26px;
    margin: calc(var(--mm-spacing) / 2) 0;
  }

  code,
  pre {
    background: #fff;
    border: 1px solid var(--mm-color-border);
    border-radius: 4px;
    color: var(--mm-color-display-text);
    font-family: var(--mm-font-stack-monospace);
    font-size: 14px;
    font-weight: 700;
    padding: 2px 6px;
    transition: background-color 0.2s ease-out;
  }

  code:hover {
    background-color: var(--mm-color-sidebar);
  }

  :first-child {
    margin-top: var(--mm-spacing);
  }

  a {
    align-items: center;
    border-bottom: 2px dotted var(--mm-color-display-text);
    color: var(--mm-color-display-text);
    font-weight: 500;
    height: 20px;
    padding-bottom: 2px;
    text-decoration: none;
  }

  a:hover {
    border-bottom: 2px solid var(--mm-color-display-text);
  }

  ul {
    li {
      list-style: disc;
      margin-left: 25px;

      ul {
        li {
          list-style: circle;
          margin-left: 35px;
        }
      }
    }
  }

  img {
    max-width: 100%;
  }
}

.article__content {
  grid-area: article;
  max-width: 880px;
  padding-top: 0;
  width: 100%;

  .article__updated {
    color: var(--mm-color-primary-text);
    font-size: 12px;
    font-style: italic;
    font-weight: 400;
    margin-bottom: var(--mm-spacing);
    margin-top: calc(var(--mm-spacing) * 2);
    text-align: center;
  }

  .individual__attachment-item {
    padding-bottom: 5px;

    a {
      align-items: center;
      border-bottom: 2px dotted var(--mm-color-display-text);
      color: var(--mm-color-display-text);
      font-weight: 500;
      height: 20px;
      padding-bottom: 2px;
      text-decoration: none;
    }

    a:hover {
      border-bottom: 2px solid var(--mm-color-display-text);
    }
  }
}

.article__footer {
  border-top: 1px solid var(--mm-color-border);
  display: grid;
  grid-area: footer;
  justify-content: center;
  max-width: 880px;
  padding: var(--mm-spacing);
  width: 100%;
}

.article__votes {
  display: grid;
  grid-column-gap: calc(var(--mm-spacing) / 2);
  grid-row-gap: calc(var(--mm-spacing) / 2);
  grid-template-areas:
    'question question'
    'yes no';
  grid-template-columns: max-content max-content;
  text-align: center;

  .article__votes-question {
    color: var(--mm-color-primary-text);
    font-family: var(--mm-font-stack-display);
    font-size: 20px;
    font-weight: 500;
    grid-area: question;
    line-height: 1.2em;
  }

  .article-vote {
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 10%), 0 4px 6px -2px rgb(0 0 0 / 5%);
    font-size: 16px;
    position: relative;
    top: 0;
    width: 80px;

    &::before {
      filter: invert(1);
    }

    &:hover {
      box-shadow: 0 10px 15px -3px rgb(0 0 0 / 10%), 0 4px 6px -2px rgb(0 0 0 / 5%);
      top: -2px;
    }
  }

  .article-vote-up {
    grid-area: yes;
    justify-self: right;
  }

  .article-vote-down {
    grid-area: no;
    justify-self: left;
  }

  .article-vote-up::before {
    content: url('data:image/svg+xml;utf8, <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 20 20" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z"></path></svg>');
    left: -7px;
    position: relative;
    top: 2px;
  }

  .article-vote-down::before {
    content: url('data:image/svg+xml;utf8, <svg stroke-width="0" viewBox="0 0 20 20" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M18 9.5a1.5 1.5 0 11-3 0v-6a1.5 1.5 0 013 0v6zM14 9.667v-5.43a2 2 0 00-1.105-1.79l-.05-.025A4 4 0 0011.055 2H5.64a2 2 0 00-1.962 1.608l-1.2 6A2 2 0 004.44 12H8v4a2 2 0 002 2 1 1 0 001-1v-.667a4 4 0 01.8-2.4l1.4-1.866a4 4 0 00.8-2.4z"></path></svg>');
    left: -7px;
    position: relative;
    top: 3px;
  }
}
